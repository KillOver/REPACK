!function(e){var t,n,o="file_upload",a="undefined",r="function",i="number",s=function(e,t){var n=0;this.complete=function(){n+=1,n===t&&e()}};t=function(t){var n,l,d,p=this,c={namespace:o,uploadFormFilter:function(e){return!0},fileInputFilter:function(e){return!0},cssClass:o,dragDropSupport:!0,dropZone:t,url:function(e){return e.attr("action")},method:function(e){return e.attr("method")},fieldName:function(e){return e.attr("name")},formData:function(e){return e.serializeArray()},multipart:!0,multiFileRequest:!1,withCredentials:!1,forceIframeUpload:!1},u={},f={},m=/^http(s)?:\/\//,h=function(){return typeof XMLHttpRequest!==a&&typeof File!==a&&(!c.multipart||typeof FormData!==a||typeof FileReader!==a)},g=function(){c.dragDropSupport&&(typeof c.onDocumentDragEnter===r&&(u["dragenter."+c.namespace]=function(e){c.onDocumentDragEnter(e)}),typeof c.onDocumentDragLeave===r&&(u["dragleave."+c.namespace]=function(e){c.onDocumentDragLeave(e)}),u["dragover."+c.namespace]=p.onDocumentDragOver,u["drop."+c.namespace]=p.onDocumentDrop,e(document).bind(u),typeof c.onDragEnter===r&&(f["dragenter."+c.namespace]=function(e){c.onDragEnter(e)}),typeof c.onDragLeave===r&&(f["dragleave."+c.namespace]=function(e){c.onDragLeave(e)}),f["dragover."+c.namespace]=p.onDragOver,f["drop."+c.namespace]=p.onDrop,c.dropZone.bind(f)),l.bind("change."+c.namespace,p.onChange)},y=function(){e.each(u,function(t,n){e(document).unbind(t,n)}),e.each(f,function(e,t){c.dropZone.unbind(e,t)}),l.unbind("change."+c.namespace)},v=function(e,t,n,o){typeof o.onProgress===r&&(n.upload.onprogress=function(a){o.onProgress(a,e,t,n,o)}),typeof o.onLoad===r&&(n.onload=function(a){o.onLoad(a,e,t,n,o)}),typeof o.onAbort===r&&(n.onabort=function(a){o.onAbort(a,e,t,n,o)}),typeof o.onError===r&&(n.onerror=function(a){o.onError(a,e,t,n,o)})},D=function(e){return typeof e.url===r?e.url(e.uploadForm||n):e.url},C=function(e){return typeof e.method===r?e.method(e.uploadForm||n):e.method},b=function(e){return typeof e.fieldName===r?e.fieldName(e.fileInput||l):e.fieldName},w=function(t){var o;return typeof t.formData===r?t.formData(t.uploadForm||n):e.isArray(t.formData)?t.formData:t.formData?(o=[],e.each(t.formData,function(e,t){o.push({name:e,value:t})}),o):[]},R=function(t){if(m.test(t)){var n=location.host,o=location.protocol.length+2,a=t.indexOf(n,o),r=a+n.length;return a!==o&&a!==t.indexOf("@",o)+1||t.length!==r&&-1===e.inArray(t.charAt(r),["/","?","#"])?!1:!0}return!0},U=function(e,t,n){n&&t.setRequestHeader("X-File-Name",unescape(encodeURIComponent(e.name))),t.setRequestHeader("Content-Type",e.type),t.send(e)},F=function(t,n,o){var a,r=new FormData;for(e.each(w(o),function(e,t){r.append(t.name,t.value)}),a=0;a<t.length;a+=1)r.append(b(o),t[a]);n.send(r)},Z=function(e,t){var n=new FileReader;n.onload=function(n){e.content=n.target.result,t()},n.readAsBinaryString(e)},T=function(t,n,o,a){var r="--",i="\r\n",s="";return e.each(a,function(e,n){s+=r+t+i+'Content-Disposition: form-data; name="'+unescape(encodeURIComponent(n.name))+'"'+i+i+unescape(encodeURIComponent(n.value))+i}),e.each(n,function(e,n){s+=r+t+i+'Content-Disposition: form-data; name="'+unescape(encodeURIComponent(o))+'"; filename="'+unescape(encodeURIComponent(n.name))+'"'+i+"Content-Type: "+n.type+i+i+n.content+i}),s+=r+t+r+i},L=function(e,t,n){var o,a,r="----MultiPartFormBoundary"+(new Date).getTime();for(t.setRequestHeader("Content-Type","multipart/form-data; boundary="+r),o=new s(function(){t.sendAsBinary(T(r,e,b(n),w(n)))},e.length),a=0;a<e.length;a+=1)Z(e[a],o.complete)},S=function(t,n,o,r){var s,l=D(r),d=R(l);v(t,n,o,r),o.open(C(r),l,!0),d?o.setRequestHeader("X-Requested-With","XMLHttpRequest"):r.withCredentials&&(o.withCredentials=!0),r.multipart?(s=typeof n===i?[t[n]]:t,typeof FormData!==a?F(s,o,r):typeof FileReader!==a?L(s,o,r):e.error("Browser does neither support FormData nor FileReader interface")):U(t[n],o,d)},_=function(t,n,o,a,i){var s=new XMLHttpRequest,l=e.extend({},c);l.fileInput=o,l.uploadForm=a,typeof l.initUpload===r?l.initUpload(t,n,i,s,l,function(){S(n,i,s,l)}):S(n,i,s,l)},E=function(e,t,n,o){var a;if(c.multiFileRequest)_(e,t,n,o);else for(a=0;a<t.length;a+=1)_(e,t,n,o,a)},A=function(t,n,o){var a=w(o);n.find(":input").not(":disabled").attr("disabled",!0).addClass(o.namespace+"_disabled"),e.each(a,function(t,a){e('<input type="hidden"/>').attr("name",a.name).val(a.value).addClass(o.namespace+"_form_data").appendTo(n)}),t.attr("name",b(o)).appendTo(n)},I=function(e,t,n){e.detach(),t.find("."+n.namespace+"_disabled").removeAttr("disabled").removeClass(n.namespace+"_disabled"),t.find("."+n.namespace+"_form_data").remove()},N=function(t,n,o,a){var i=n.attr("action"),s=n.attr("method"),l=n.attr("target");o.unbind("abort").bind("abort",function(e){o.readyState=0,o.unbind("load").attr("src","javascript".concat(":false;")),typeof a.onAbort===r&&a.onAbort(e,[{name:t.val(),type:null,size:null}],0,o,a)}).unbind("load").bind("load",function(i){o.readyState=4,typeof a.onLoad===r&&a.onLoad(i,[{name:t.val(),type:null,size:null}],0,o,a),e('<iframe src="javascript:false;" style="display:none"></iframe>').appendTo(n).remove()}),n.attr("action",D(a)).attr("method",C(a)).attr("target",o.attr("name")),A(t,n,a),o.readyState=2,n.get(0).submit(),I(t,n,a),n.attr("action",i).attr("method",s).attr("target",l)},O=function(t,n,o){var a=e('<iframe src="javascript:false;" style="display:none" name="iframe_'+c.namespace+"_"+(new Date).getTime()+'"></iframe>'),i=e.extend({},c);i.fileInput=n,i.uploadForm=o,a.readyState=0,a.abort=function(){a.trigger("abort")},a.bind("load",function(){a.unbind("load"),typeof i.initUpload===r?i.initUpload(t,[{name:n.val(),type:null,size:null}],0,a,i,function(){N(n,o,a,i)}):N(n,o,a,i)}).appendTo(o)},x=function(){n=(t.is("form")?t:t.find("form")).filter(c.uploadFormFilter)},j=function(){l=n.find("input:file").filter(c.fileInputFilter)},H=function(t){var n=t.clone(!0);e("<form/>").append(n).get(0).reset(),t.after(n).detach(),j()};this.onDocumentDragOver=function(e){return typeof c.onDocumentDragOver===r&&c.onDocumentDragOver(e)===!1?!1:void e.preventDefault()},this.onDocumentDrop=function(e){return typeof c.onDocumentDrop===r&&c.onDocumentDrop(e)===!1?!1:void e.preventDefault()},this.onDragOver=function(e){if(typeof c.onDragOver===r&&c.onDragOver(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&(t.dropEffect=t.effectAllowed="copy"),e.preventDefault()},this.onDrop=function(e){if(typeof c.onDrop===r&&c.onDrop(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&t.files&&h()&&E(e,t.files),e.preventDefault()},this.onChange=function(t){if(typeof c.onChange===r&&c.onChange(t)===!1)return!1;var n=e(t.target),a=e(t.target.form);1===a.length?(n.data(o+"_form",a),H(n)):a=n.data(o+"_form"),!c.forceIframeUpload&&t.target.files&&h()?E(t,t.target.files,n,a):O(t,n,a)},this.init=function(n){return n&&(e.extend(c,n),d=n),x(),j(),t.data(c.namespace)?void e.error('FileUpload with namespace "'+c.namespace+'" already assigned to this element'):(t.data(c.namespace,p).addClass(c.cssClass),c.dropZone.not(t).addClass(c.cssClass),void g())},this.options=function(n){var o,r,i,s;return typeof n===a?e.extend({},c):(d&&e.extend(d,n),y(),e.each(n,function(t,n){switch(t){case"namespace":return void e.error("The FileUpload namespace cannot be updated.");case"uploadFormFilter":i=!0,s=!0;break;case"fileInputFilter":s=!0;break;case"cssClass":o=c.cssClass;break;case"dropZone":r=c.dropZone}c[t]=n}),i&&x(),s&&j(),typeof o!==a?(t.removeClass(o).addClass(c.cssClass),(r?r:c.dropZone).not(t).removeClass(o),c.dropZone.not(t).addClass(c.cssClass)):r&&(r.not(t).removeClass(c.cssClass),c.dropZone.not(t).addClass(c.cssClass)),void g())},this.option=function(e,t){var n;return typeof t===a?c[e]:(n={},n[e]=t,void p.options(n))},this.destroy=function(){y(),t.removeData(c.namespace).removeClass(c.cssClass),c.dropZone.not(t).removeClass(c.cssClass)}},n={init:function(n){return this.each(function(){new t(e(this)).init(n)})},option:function(t,n,a){a=a?a:o;var r=e(this).data(a);return r?"string"==typeof t?r.option(t,n):r.options(t):void e.error('No FileUpload with namespace "'+a+'" assigned to this element')},destroy:function(t){return t=t?t:o,this.each(function(){var n=e(this).data(t);n?n.destroy():e.error('No FileUpload with namespace "'+t+'" assigned to this element')})}},e.fn.fileUpload=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.fileUpload"):n.init.apply(this,arguments)}}(jQuery),function(e){var t,n,o="undefined",a="function",r=function(e,t){var n,r;return t.test(e.type)?(n=document.createElement("img"),typeof URL!==o&&typeof URL.createObjectURL===a?(n.src=URL.createObjectURL(e),n.onload=function(){URL.revokeObjectURL(this.src)},n):typeof FileReader!==o&&(r=new FileReader,typeof r.readAsDataURL===a)?(r.onload=function(e){n.src=e.target.result},r.readAsDataURL(e),n):null):null};t=function(t,n){var i,s,l=this;this.dropZone=t,this.imageTypes=/^image\/(gif|jpeg|png)$/,this.previewSelector=".file_upload_preview",this.progressSelector=".file_upload_progress div",this.cancelSelector=".file_upload_cancel button",this.cssClassSmall="",this.cssClassLarge="file_upload_large",this.cssClassHighlight="file_upload_highlight",this.dropEffect="highlight",this.uploadTable=this.downloadTable=null,this.buildUploadRow=this.buildDownloadRow=function(){return null},this.addNode=function(t,n,o){n?n.css("display","none").appendTo(t).fadeIn(function(){if(typeof o===a)try{o()}catch(t){throw e(this).stop(),t}}):typeof o===a&&o()},this.removeNode=function(t,n){t?t.fadeOut(function(){if(e(this).remove(),typeof n===a)try{n()}catch(t){throw e(this).stop(),t}}):typeof n===a&&n()},this.onAbort=function(e,t,n,o,a){a.removeNode(a.uploadRow)},this.cancelUpload=function(e,t,n,o,a){var r=o.readyState;o.abort(),(isNaN(r)||2>r)&&a.onAbort(e,t,n,o,a)},this.initProgressBar=function(t,n){if(typeof t.progressbar===a)return t.progressbar({value:n});var o=e('<progress value="'+n+'" max="100"/>').appendTo(t);return o.progressbar=function(e,t){o.attr("value",t)},o},this.initUploadRow=function(t,n,o,i,s,l){var d=s.uploadRow=s.buildUploadRow(n,o,s);d&&(s.progressbar=s.initProgressBar(d.find(s.progressSelector),i.upload?0:100),d.find(s.cancelSelector).click(function(e){s.cancelUpload(e,n,o,i,s)}),d.find(s.previewSelector).each(function(){e(this).append(new r(n[o],s.imageTypes))})),s.addNode(typeof s.uploadTable===a?s.uploadTable(s):s.uploadTable,d,l)},this.initUpload=function(e,t,n,o,r,i){r.initUploadRow(e,t,n,o,r,function(){typeof r.beforeSend===a?r.beforeSend(e,t,n,o,r,i):i()})},this.onProgress=function(e,t,n,o,a){a.progressbar&&a.progressbar.progressbar("value",parseInt(e.loaded/e.total*100,10))},this.parseResponse=function(t){return typeof t.responseText!==o?e.parseJSON(t.responseText):e.parseJSON(t.contents().text())},this.initDownloadRow=function(e,t,n,o,r,i){var s,l;try{s=r.response=r.parseResponse(o),l=r.downloadRow=r.buildDownloadRow(s,r),r.addNode(typeof r.downloadTable===a?r.downloadTable(r):r.downloadTable,l,i)}catch(d){if(typeof r.onError!==a)throw d;r.originalEvent=e,r.onError(d,t,n,o,r)}},this.onLoad=function(e,t,n,o,r){r.removeNode(r.uploadRow,function(){r.initDownloadRow(e,t,n,o,r,function(){typeof r.onComplete===a&&r.onComplete(e,t,n,o,r)})})},this.dropZoneEnlarge=function(){s||(typeof l.dropZone.switchClass===a?l.dropZone.switchClass(l.cssClassSmall,l.cssClassLarge):(l.dropZone.addClass(l.cssClassLarge),l.dropZone.removeClass(l.cssClassSmall)),s=!0)},this.dropZoneReduce=function(){typeof l.dropZone.switchClass===a?l.dropZone.switchClass(l.cssClassLarge,l.cssClassSmall):(l.dropZone.addClass(l.cssClassSmall),l.dropZone.removeClass(l.cssClassLarge)),s=!1},this.onDocumentDragEnter=function(e){l.dropZoneEnlarge()},this.onDocumentDragOver=function(e){i&&clearTimeout(i),i=setTimeout(function(){l.dropZoneReduce()},200)},this.onDragEnter=this.onDragLeave=function(e){l.dropZone.toggleClass(l.cssClassHighlight)},this.onDrop=function(e){i&&clearTimeout(i),l.dropEffect&&typeof l.dropZone.effect===a?l.dropZone.effect(l.dropEffect,function(){l.dropZone.removeClass(l.cssClassHighlight),l.dropZoneReduce()}):(l.dropZone.removeClass(l.cssClassHighlight),l.dropZoneReduce())},e.extend(this,n)},n={init:function(n){return this.each(function(){e(this).fileUpload(new t(e(this),n))})},option:function(t,n,a){return typeof t===o||"string"==typeof t&&typeof n===o?e(this).fileUpload("option",t,n,a):this.each(function(){e(this).fileUpload("option",t,n,a)})},destroy:function(t){return this.each(function(){e(this).fileUpload("destroy",t)})}},e.fn.fileUploadUIReady=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.fileUploadUI"):n.init.apply(this,arguments)}}(jQuery);